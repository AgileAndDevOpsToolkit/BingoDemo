<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="theme-color" content="#111827">
  <link rel="manifest" href="./manifest.webmanifest">

  <!-- iOS (Safari) specific -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="icons/icon-192.png">

  <title>Bingo Démo</title>
  <style>
    :root {
      --bg: #f6f7fb;
      --panel: #ffffff;
      --panel-2: #fafbff;
      --text: #0b1220;
      --muted: #5b6472;
      --accent: #1fbf5b;
      --accent-600: #179a49;
      --accent-700: #138242;
      --border: #dfe4ee;
      --shadow: 0 10px 30px rgba(20,32,55,.08);
      --radius: 16px;
      --radius-sm: 12px;
      --focus: 0 0 0 3px rgba(31, 191, 91, .35), 0 0 0 6px rgba(31, 191, 91, .18);
      --check-green: #28d17c;
    }

    *, *::before, *::after { box-sizing: border-box; }

    html, body { height: 100%; background: var(--bg); color: var(--text); font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial; line-height: 1.55; margin: 0; }

    .container { max-width: 1200px; margin: 32px auto 64px; padding: 0 16px; }

    header { display: flex; align-items: center; justify-content: space-between; gap: 16px; margin-bottom: 16px; flex-wrap: wrap; }
    .title { font-size: clamp(24px, 3vw, 36px); font-weight: 900; color: #0b1220; }
    .hint { font-size: 13px; color: var(--muted); flex: 1; min-width: 220px; }

    /* Tabs */
    .tabs { display: flex; gap: 10px; margin: 12px 0 20px; flex-wrap: wrap; }
    .tab-btn { appearance: none; border: 1px solid var(--border); background: #fff; color: #0b1220; padding: 10px 16px; border-radius: 999px; cursor: pointer; box-shadow: var(--shadow); font-weight: 700; transition: all .15s ease-in-out; }
    .tab-btn:hover { transform: translateY(-1px); }
    .tab-btn[aria-selected="true"] { background: linear-gradient(180deg, var(--accent), var(--accent-600)); color: #fff; border-color: var(--accent-700); box-shadow: 0 8px 20px rgba(31,191,91,.35), inset 0 -2px 0 rgba(0,0,0,.08); }

    .tab-panel { display: none; }
    .tab-panel.active { display: block; }

    /* --- Panel 1: Préparer une démo (table) --- */
    .table-wrap { background: var(--panel); border: 1px solid var(--border); border-radius: var(--radius); box-shadow: var(--shadow); overflow: hidden; }

    table { width: 100%; border-collapse: collapse; table-layout: auto; }
    thead th { text-align: left; font-size: 13px; font-weight: 700; padding: 14px 16px; color: #314156; border-bottom: 1px solid var(--border); background: #f7f9ff; }

    tbody tr { border-bottom: 1px solid var(--border); transition: background .2s ease, filter .2s ease, opacity .2s ease; }
    tbody tr:hover { background: rgba(0,0,0,.03); }

    td { vertical-align: top; padding: 14px 16px; }

    /* Colonne image */
    td.img-cell { width: 190px; }
    .img-block { display: grid; grid-template-rows: auto 1fr; gap: 8px; align-items: start; }
    .img-label { font-weight: 800; font-size: 15px; }
    .thumb { display: block; max-width: 170px; max-height: 170px; width: auto; height: auto; border-radius: var(--radius-sm); border: 1px solid var(--border); box-shadow: 0 4px 8px rgba(20,32,55,.08); background: #fff; }

    /* Case à cocher */
    .check-cell { width: 60px; text-align: center; }
    .pretty-check { appearance: none; -webkit-appearance: none; width: 28px; height: 28px; background: #fff; border: 2px solid #b8c5d6; border-radius: 8px; position: relative; cursor: pointer; }
    .pretty-check::after { content: ""; position: absolute; left: 50%; top: 48%; width: 7px; height: 14px; border-right: 4px solid var(--accent); border-bottom: 4px solid var(--accent); transform: translate(-50%, -50%) rotate(40deg) scale(0); transition: transform .18s ease-out; }
    .pretty-check:checked { border-color: var(--accent-600); background: #fff; }
    .pretty-check:checked::after { transform: translate(-50%, -50%) rotate(40deg) scale(1.6); }

    /* Colonne notes */
    td.notes-cell { padding-right: 28px; }
    .notes-label { font-size: 14px; font-weight: 600; margin: 2px 0 8px; color: #243246; overflow-wrap: anywhere; hyphens: auto; }
    textarea.notes { width: 100%; max-width: 100%; box-sizing: border-box; min-height: 110px; resize: vertical; padding: 12px 14px; border-radius: var(--radius-sm); border: 1px solid var(--border); background: #ffffff; color: var(--text); font: inherit; }
    textarea.notes:focus { box-shadow: var(--focus); border-color: var(--accent-600); }

    tr.muted { filter: grayscale(.9) opacity(.65); opacity: .56; }

    /* --- Panel 2: Évaluer une démo (grille 3x3) --- */
    .grid-wrap { background: var(--panel); border: 1px solid var(--border); border-radius: var(--radius); box-shadow: var(--shadow); padding: 8px; }
    .grid9 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; }

    .cell { position: relative; background: #fff; border: 2px solid #e7ecf3; border-radius: 12px; padding: 8px 8px 54px; min-height: 180px; display: grid; grid-template-rows: auto 1fr; overflow: hidden; }
    .cell .mini { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }
    .cell .mini img { width: 96px; height: 96px; object-fit: contain; }
    .cell .mini .t { font-weight: 800; font-size: 16px; color: #0e1a2b; line-height: 1.25; }

    .tick { position: absolute; left: 50%; bottom: 12px; transform: translateX(-50%); width: 72px; height: 72px; border-radius: 50%; border: 3px solid #cfd8e3; background: #f3f6fb; display: grid; place-items: center; cursor: pointer; transition: all .15s ease-in-out; }
    .tick::after { content: ""; width: 18px; height: 32px; border-right: 6px solid transparent; border-bottom: 6px solid transparent; transform: rotate(40deg); }
    .cell.active .tick { background: var(--check-green); border-color: #18a45d; box-shadow: 0 10px 22px rgba(24,164,93,.28); }
    .cell.active .tick::after { border-right-color: #fff; border-bottom-color: #fff; }

    /* Mobile */
    @media (max-width: 820px) {
      /* Panel 1 (préparer) – inchangé, juste compact */
      thead { display: none; }
      table, tbody, tr, td { display: block; width: 100%; }
      tbody tr { padding: 14px; margin: 12px 0; background: #fff; border-radius: var(--radius); box-shadow: var(--shadow); overflow: hidden; }
      td { padding: 10px 12px; }
      .check-cell { text-align: left; }
      td.notes-cell { padding: 10px 12px; }
      .notes-label { margin-left: 2px; margin-right: 2px; }
      textarea.notes { min-height: 130px; margin: 6px 2px 0; box-shadow: none; outline: none; }
      textarea.notes:focus { box-shadow: inset 0 0 0 2px rgba(31,191,91,.35); border-color: var(--accent-600); }

      /* Panel 2 (évaluer) – texte sous l’image, icône ~2×, pas de chevauchement */
      .grid9 { grid-template-columns: repeat(3, 1fr); gap: 6px; }

      /* Réserve fixe en bas pour le cercle: padding-bottom */
      .cell {
        position: relative;
        min-height: 32vw;
        padding: 8px 6px 54px; /* <= réserve pour le tick (36px + marge) */
      }

      /* L’ensemble image+texte occupe toute la hauteur disponible au-dessus du cercle */
      .cell .mini {
        display: grid;
        grid-template-rows: 1fr auto;   /* image qui prend le reste + texte dessous */
        align-items: center;
        justify-items: center;
        row-gap: 6px;
        text-align: center;
        height: 100%;
      }

      /* Icône ~2× + responsive, sans déborder */
      .cell .mini img {
        width: min(64px, 18vw);
        height: auto;
        max-height: calc(100% - 2.6em); /* laisse ~2 lignes de texte */
        object-fit: contain;
      }

      .cell .mini .t {
        font-size: 12px;
        line-height: 1.25;
        margin: 0;              /* évite qu’un margin pousse le texte sur le cercle */
      }

      /* Le cercle reste tel quel (on ne le touche pas), on garantit juste la place */
      .tick { width: 36px; height: 36px; border-width: 2px; bottom: 8px; }
      .tick::after { width: 9px; height: 16px; border-right-width: 3px; border-bottom-width: 3px; }
    }

    /* Tab switching (JS) */

  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="title">Bingo Démo</div>
      <div class="hint">Tout est coché par défaut. Décoche pour griser une ligne. Les notes sont sauvegardées automatiquement (local).</div>
    </header>

    <nav class="tabs" role="tablist" aria-label="Sections">
      <button class="tab-btn" role="tab" aria-selected="true" aria-controls="tab-preparer" id="tabbtn-preparer">Préparer une démo</button>
      <button class="tab-btn" role="tab" aria-selected="false" aria-controls="tab-evaluer" id="tabbtn-evaluer">Évaluer une démo</button>
    </nav>

    <!-- Panel 1: Préparer une démo -->
    <section id="tab-preparer" class="tab-panel active">
      <div class="table-wrap" role="region">
        <table>
          <thead>
            <tr>
              <th>Élément</th>
              <th> </th>
              <th>Notes</th>
            </tr>
          </thead>
          <tbody id="rows"></tbody>
        </table>
      </div>
    </section>

    <!-- Panel 2: Évaluer une démo -->
    <section id="tab-evaluer" class="tab-panel" aria-hidden="true">
      <div class="grid-wrap">
        <div id="grid9" class="grid9" role="grid" aria-label="Évaluer une démo — 9 critères"></div>
      </div>
    </section>
  </div>

  <script>
	if ("serviceWorker" in navigator) {
	  window.addEventListener("load", () => {
		navigator.serviceWorker.register("./service-worker.js")
		.catch(console.error);
	  });
	}
    const ITEMS = [
      { id: 'pour-qui-pourquoi', label: 'Pour Qui ? Pour Quoi ?', img: 'bingo_icons/PourQuiPourquoi.png', alt: 'Pour Qui ? Pour Quoi ?', prompt: "A qui s'adresse la démo ? Quel message voulez-vous transmettre à votre public cible ?" },
      { id: 'raconter-une-histoire', label: 'Raconter Une Histoire', img: 'bingo_icons/RaconterUneHistoire.png', alt: 'Raconter Une Histoire', prompt: 'Quelle histoire allez-vous raconter afin de contextualiser votre présentation ?' },
      { id: 'roadmap', label: 'Roadmap', img: 'bingo_icons/Roadmap.png', alt: 'Roadmap', prompt: 'Avez-vous prévu de donner une roadmap ? Quelles sont les dates clé ?' },
      { id: 'next-step', label: 'Next Step', img: 'bingo_icons/NextStep.png', alt: 'Next Step', prompt: 'Quelle est la prochaine étape qui fait suite à votre présentation ?' },
      { id: 'image-figurative', label: 'Image Figurative', img: 'bingo_icons/ImageFigurative.png', alt: 'Image Figurative', prompt: 'Avez-vous prévu d\'illustrer votre présentation par des images ? Quelles images sont prévues ?' },
      { id: 'schema', label: 'Schéma', img: 'bingo_icons/Schema.png', alt: 'Schéma', prompt: 'Avez-vous prévu de présenter des schémas ? Quels schémas ?' },
      { id: 'capture-ecran', label: "Captures d'Écran", img: 'bingo_icons/CaptureEcran.png', alt: "Captures d'Écran", prompt: "Avez-vous prévu de mettre des captures d'écran ou des photos du produit que vous présentez ? Quelles captures d'écran ou photos ?" },
      { id: 'demo-live', label: 'Démo Live', img: 'bingo_icons/DemoLive.png', alt: 'Démo Live', prompt: 'Avez vous prévu de faire une démo live du produit que vous présentez ? Quel scénario ?' },
      { id: 'cadeau', label: 'Cadeau', img: 'bingo_icons/Cadeau.png', alt: 'Cadeau', prompt: "Avez-vous prévu de donner quelque chose à l'auditoire à la fin de la présentation ? Lien, accès à un produit ?" },
    ];

    const rowsEl = document.getElementById('rows');
    function storageKey(key) { return `checklist9:${key}`; }

    // ----- Panel 1: table -----
    function createRow(item) {
      const tr = document.createElement('tr');
      tr.dataset.id = item.id;

      const td1 = document.createElement('td');
      td1.className = 'img-cell';
      td1.innerHTML = `
        <div class=\"img-block\">
          <div class=\"img-label\"><strong>${item.label}</strong></div>
          <img class=\"thumb\" src=\"${item.img}\" alt=\"${item.alt}\" loading=\"lazy\" />
        </div>`;

      const td2 = document.createElement('td');
      td2.className = 'check-cell';
      const checkId = `check-${item.id}`;
      td2.innerHTML = `<input id=\"${checkId}\" class=\"pretty-check\" type=\"checkbox\" aria-label=\"${item.label}\" />`;

      const td3 = document.createElement('td');
      td3.className = 'notes-cell';
      const notesId = `notes-${item.id}`;
      td3.innerHTML = `
        <div class=\"notes-label\">${item.prompt}</div>
        <textarea id=\"${notesId}\" class=\"notes\" placeholder=\"Vos notes…\"></textarea>`;

      tr.appendChild(td1); tr.appendChild(td2); tr.appendChild(td3);

      const checkbox = td2.querySelector('input');
      const storedChecked = localStorage.getItem(storageKey(`${item.id}:checked`));
      const isChecked = storedChecked === null ? true : storedChecked === 'true';
      checkbox.checked = isChecked; if (!isChecked) tr.classList.add('muted');

      const notes = td3.querySelector('textarea');
      const savedNotes = localStorage.getItem(storageKey(`${item.id}:notes`));
      if (savedNotes) notes.value = savedNotes;

      checkbox.addEventListener('change', () => {
        tr.classList.toggle('muted', !checkbox.checked);
        localStorage.setItem(storageKey(`${item.id}:checked`), checkbox.checked);
      });
      notes.addEventListener('input', () => {
        localStorage.setItem(storageKey(`${item.id}:notes`), notes.value);
      });

      return tr;
    }

    function initTable() { ITEMS.forEach(item => rowsEl.appendChild(createRow(item))); }

    // ----- Panel 2: grid -----
    function gridStorageKey(id){ return storageKey(`eval:${id}`); }
    function makeCell(item){
      const div = document.createElement('div');
      div.className = 'cell';
      div.setAttribute('role','gridcell');
      div.dataset.id = item.id;
      div.innerHTML = `
        <div class="mini" aria-hidden="true">
          <img src="${item.img}" alt="" />
          <div class="t">${item.label}</div>
        </div>
        <div class="tick" role="button" aria-label="Cocher ${item.label}"></div>
      `;
      const on = localStorage.getItem(gridStorageKey(item.id)) === 'true';
      if (on) div.classList.add('active');
      div.querySelector('.tick').addEventListener('click', () => {
        div.classList.toggle('active');
        const state = div.classList.contains('active');
        localStorage.setItem(gridStorageKey(item.id), String(state));
      });
      return div;
    }

    function initGrid(){
      const grid = document.getElementById('grid9');
      ITEMS.forEach(i => grid.appendChild(makeCell(i)));
    }

    // ----- Tabs -----
    function initTabs(){
      const btnPrep = document.getElementById('tabbtn-preparer');
      const btnEval = document.getElementById('tabbtn-evaluer');
      const pPrep = document.getElementById('tab-preparer');
      const pEval = document.getElementById('tab-evaluer');
      function activate(which){
        const prep = which==='prep';
        btnPrep.setAttribute('aria-selected', prep?'true':'false');
        btnEval.setAttribute('aria-selected', prep?'false':'true');
        pPrep.classList.toggle('active', prep);
        pEval.classList.toggle('active', !prep);
      }
      btnPrep.addEventListener('click', () => activate('prep'));
      btnEval.addEventListener('click', () => activate('eval'));
      activate('prep');
    }

    document.addEventListener('DOMContentLoaded', () => {
      initTable();
      initGrid();
      initTabs();
    });
  </script>
</body>
</html>
